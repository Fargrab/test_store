## Тестовое задание

средствами laravel (php 7+, mysql) необходимо разработать часть магазина

1. модели (в том числе миграции для создания структуры в бд):
   
    1.1. модель товара [наименование, описание, цена, кол-во на складе]
   
    1.2. модель покупателя [имя, email, кол-во денег/баллов] (можно взять готовые модели User и доработать)
   
    1.3. модель заказа [номер, статус, дата, ссылка на покупателя, резерв товаров с фиксацией цен]
   
    1.4. любые дополнительные модели какие вы считаете нужными

2. эндпоинты в формате json:
   
    2.1 /catalog - выдача списка товаров 
   
    2.2 /create-order - создание заказа (в теле запроса перечисление товаров и их кол-ва), товары должны быть зарезервированы за покупателем 
   
    2.3 /approve-order - списать с баланса покупателя сумму за товары, сменить статус заказа

В рамках тестового задания не требуется делать систему защищенной аутентификации, при заказе просто передается id пользователя.
Так же не требуется создавать методы для создания/редактирования/удаления/просмотра моделей - заполнение бд через seeder (т е необходимы только эндпоинты описанные выше)

Результат выложить на GitHub.


### Запуск проекта локально
# Сборка контейнеров
``
docker-compose -f docker-compose.local.yml --env-file=docker.local.env up --build -d
``

# В контейнере php
```
docker-compose -f docker-compose.local.yml --env-file=docker.local.env exec php bash

cp .env.example .env

composer install

php artisan key:generate

php artisan migrate

php artisan db:seed

```
### Code style

Для форматирования php кода используется [ECS](https://github.com/symplify/easy-coding-standard).
Формат PSR-12 + подключены доп. правила в ecs.php

Проверить код:
```
vendor/bin/ecs
```
Исправить код:
```
vendor/bin/ecs --fix
```
### Статический анализ кода

Для статического анализа кода используется [PHPStan](https://phpstan.org/user-guide/getting-started)
с расширением [larastan](https://github.com/nunomaduro/larastan).

Проверить код:
```
vendor/bin/phpstan
```
В Laravel много магии, поэтому для статического анализа пришлось пойти на компромисс: в моделях описаны свойства
и подключен mixin, который помогает PhpStorm с code completion для магических методов.

Рекомендую к шторму ставить [плагин](https://plugins.jetbrains.com/plugin/7532-laravel).
Он, конечно, корявый и с 8 ларой дружит не очень, но на [платный](https://plugins.jetbrains.com/plugin/13441-laravel-idea) денег нет :)

Mixin генерируется при помощи [Laravel IDE Helper](https://github.com/barryvdh/laravel-ide-helper)
и находятся в файле _ide_helper_models.php. Возможно, в будущем это будет переделано и улучшено, но пока как есть.

Для генерации кода mixin (требуется подключение к БД):

```
php artisan ide-helper:models -M
```
К сожалению, в код моделей придётся вручную добавлять/убирать свойства при их модификации в БД. Можно копировать из _ide_helper_models.php
